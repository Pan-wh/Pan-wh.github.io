(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{561:function(s,a,n){"use strict";n.r(a);var e=n(7),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h3",{attrs:{id:"ansible的安装配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ansible的安装配置"}},[s._v("#")]),s._v(" ansible的安装配置")]),s._v(" "),n("h4",{attrs:{id:"一、特性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、特性"}},[s._v("#")]),s._v(" 一、特性")]),s._v(" "),n("p",[s._v("​    模块化，调用特定的模块，完成特定的任务")]),s._v(" "),n("p",[s._v("​\t基于Python语言实现，由Paramiko，PyYAML和Jinjin2三个关键模块；"),n("br"),s._v(" "),s._v("\n​\t部署简单，agentless"),n("br"),s._v("\n​\t\t\t默认使用SSH协议；"),n("br"),s._v("\n​    \t\t\t（1）基于秘钥认证；"),n("br"),s._v("\n​    \t\t\t（2）在inventory文件中指定账户和密码；"),n("br"),s._v("\n​\t\t\t主从模式："),n("br"),s._v("\n​    \t\t\t\tmaster: ansible, ssh client"),n("br"),s._v("\n​    \t\t\t\tslave：ssh server"),n("br"),s._v("\n​\t支持自定义模块：支持各种编程语言"),n("br"),s._v("\n​\t支持Playbook"),n("br"),s._v("\n​\t基于“模块” 完成各种“任务”")]),s._v(" "),n("h4",{attrs:{id:"二、安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、安装"}},[s._v("#")]),s._v(" 二、安装")]),s._v(" "),n("p",[s._v("ansible依赖于Python2.6或更高的版本、paramiko、PyYAML及Jinja2；")]),s._v(" "),n("p",[s._v("1.1编译安装\n​    解决依赖关系")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#yum -y install python-jinja2 PyYAML python-paramiko python-babel python-crypto libselinux-python\n#tar xf ansible-1.5.4.tar.gz\n#cd ansible-1.5.4\n#python setup.py build\n#python setup.py install\n#mkdir /etc/ansible\n#cp -r examples/* /etc/ansible\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("1.2 rpm包安装")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#yum install ansible\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("注意：不同版本的ansible的功能差异可能较大；")]),s._v(" "),n("p",[s._v("安装：依赖于epel源\n配置文件：/etc/ansible/ansible.cfg\nInvertory: /etc/ansible/hosts")]),s._v(" "),n("h4",{attrs:{id:"三、ansible组成介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、ansible组成介绍"}},[s._v("#")]),s._v(" 三、ansible组成介绍")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("tree /etc/ansible/\n/etc/ansible/\n    ├── ansible.cfg  # ansible的配置文件\n    ├── hosts  # ansible的主仓库 用来存储需要管理的远程主机的相关信息\n    └── roles\n    \n        hosts的常用参数配置：\n            ansible_ssh_host                    # 目标主机地址\n            ansible_ssh_port                    # 目标主机端口，默认22\n            ansible_ssh_user                    # 目标主机用户\n            ansible_ssh_pass                    # 目标主机ssh密码\n            ansible_sudo_pass                 \t# sudo密码\n            ansible_sudo_exe\n            ansible_connection               \t\t# 与主机的连接类型，比如：local,ssh或者paramiko\n            ansible_ssh_private_key_file  \t\t\t# 私钥地址\n            ansible_shell_type                 \t# 目标系统的shell类型\n            ansible_python_interpreter  \t\t\t\t# python版本\n            \n    #s1 ansible_ssh_port=65522 ansible_ssh_host=10.0.0.1 ansible_ssh_user=simo # 别名s1\n\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("如何查看模块帮助：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    ansible-doc -l \t\t\t\t\t\t\t\t\t\t\t#列出所有已安装的模块\n    ansible-doc -s MODULE_NAME \t\t\t\t\t#查看具体某模块的用法\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("ansible的基本架构：")]),s._v(" "),n("p",[s._v("​        核心：\tansible\n​        核心模块（Core Modules）：\t这些都是ansible自带的模块\n​        扩展模块（Custom Modules）：\t如果核心模块不足以完成某种功能，可以添加扩展模块\n​        插件（Plugins）：\t完成模块功能的补充\n​        剧本（Playbooks）：\tansible的任务配置文件，将多个任务定义在剧本中，由ansible自动执行\n​        连接插件（Connectior Plugins）：\tansible基于连接插件连接到各个主机上，虽然ansible是使用ssh连接\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t到各个主机的，但是它还支持其他的连接方法，所以需要有连接插件\n​        主机群（Host Inventory）：\t定义ansible管理的主机")]),s._v(" "),n("p",[s._v("ansible命令应用基础：\n语法：ansible <host-pattern> [-f forks] [-m module_name] [-a args]\n-f \tforks：启动的并发线程数；\n-m \tmodule_name：要使用的模块；\n-a \targs：模块特有的参数；")]),s._v(" "),n("p",[s._v("​    常见模块：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    command：命令模块，默认模块，用于在远程执行命令：\n    ansible all -a 'date'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('    cron:\n        state:\n            present：安装\n            absent：移除\n\n    #使用ansible给每一个节点添加cron任务\n    #ansible websrvs -m cron -a \'minute="*/10" job="/bin/echo hello" name="ceshi crob job" state=present\'\n  websrve:组   -m:指明模块使用cron模块 -a:指明参数（minute="*/10“ 每10分钟运行） job:指明命令    \t  \tname:每一个job和cron都要给一个名称\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("​")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    user:\n          name:指明创建的用户的名字;\n    ansible websrvs -m user -a 'name-mysql uid=306 system=yes group-mysql'\n\n    group:\n    ansible websrvs -m group -a 'name-mysql gid=306 system-yes'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    copy：模块用于将本地或远程机器上的文件拷贝到远程主机上。\n​        src=：定义本地源文件路径\n​        dest=：定义远程目标文件路径\n​        content=：取代src=，表示直接用此处指定的信息生成目标文件内容；\n\n​        #ansible all -m copy -a 'src=/etc/fstab dest=/tmp/fstab.ansbile owner=root mode=640'\n​        #ansible all -m copy -a 'content=\"hello Ansible\\nHi MageEdu\" dest=/tmp/test.ansible'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    file：设定文件属性\n          path=：指定文件路径，可以使用name或dest来替换；        \n    ​        创建文件的符号链接：\n    ​            src=：指定源文件\n    ​            path=：指定符号链接文件路径\n    ​        \n    ​        #ansible all -m file -a 'path=/tmp/fstab.link src=/tmp/fstab.ansbile state=link'\n    ​     ping：测试指定主机是否能连接\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("​")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    service：指定运行状态：\n    ​   enabled=：是否开机自动启动。取值为true或者false；\n    ​   name=：服务名称\n    ​   state=：状态，取值有started，stopped，restarted；\n\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    shell：在远程主机上运行命令\n        尤其是用到管道等功能的复杂命令;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("​")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    script：将本地脚本复制到远程主机并运行；\n        注意：要使用相对路径指定脚本\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    yum：安装程序包\n        name=：指明要安装的程序包，可以带上版本号\n        state：present，latest表示安装，absent表示卸载：\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("​")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    setup：收集远程主机的facts\n        每个被管理节点在接收并运行管理命令之前，会将自己主机的相关信息，如操作系统版本、IP地址等报告给远程的\t\t\t\t ansbile主机；\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h5",{attrs:{id:"ansible-playbook-剧本模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ansible-playbook-剧本模式"}},[s._v("#")]),s._v(" ansible-Playbook(剧本模式)")]),s._v(" "),n("p",[s._v("​    \t编写剧本，按照剧本去执行，作为一个适合部署复杂应用程序的基础。Playbook可以定制配置，可以按照指定的操作步骤有序执行，\n​    \t支持同步和异步方式作为一个适合部署复杂应用程序的基础。Playbook可以定制配置，可以按照指定的操作步骤有序执行，支持同步和异步方式，文件后缀名为yaml或yml；\n​")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("核心元素")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("tasks：任务，由模板定义的操作列表")])]),s._v(" "),n("tr",[n("td",[s._v("variables：变量")])]),s._v(" "),n("tr",[n("td",[s._v("templates：模板，即使用模板语法的文件")])]),s._v(" "),n("tr",[n("td",[s._v("handlers：处理器 ，当某条件满足时，触发执行的操作")])]),s._v(" "),n("tr",[n("td",[s._v("roles：角色")])])])]),s._v(" "),n("h5",{attrs:{id:"tasks-list-和action介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tasks-list-和action介绍"}},[s._v("#")]),s._v(" tasks list 和action介绍")]),s._v(" "),n("p",[s._v("​\t1：Play的主体部分是task列表，task列表中的各任务按次序逐个在hosts中指定的主机上执行，即在所有主机上完成第一个任务后再开始第二个任务。\n​\t\t在运行playbook时（从上到下执行），如果一个host执行task失败，整个tasks都会回滚，请修正playbook 中的错误，然后重新执行即可。\nTask的目的是使用指定的参数执行模块，而在模块参数中可以使用变量，模块执行时幂等的，这意味着多次执行是安全的，因为其结果一致。")]),s._v(" "),n("p",[s._v("​\t2：每一个task必须有一个名称name，这样在运行playbook时，从其输出的任务执行信息中可以很好的辨别出是属于哪一个task的。如果没有定义name，‘action’的值将会用作输出信息中标记特定的task。")]),s._v(" "),n("p",[s._v("​    3：定义一个task，常见的格式:”module: options” 例如：yum: name=httpd")]),s._v(" "),n("p",[s._v("​    4：ansible的自带模块中，command模块和shell模块无需使用key=value格式")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("常用命令\n    ansible-playbook [yaml文件名、也可以yml结尾]\n    例如：ansible-playbook a.yml\n    参数：\n\n​    -k(–ask-pass) 用来交互输入ssh密码\n​    -K(-ask-become-pass) 用来交互输入sudo密码\n​    -u 指定用户\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("# ansible-playbook a.yml --syntax-check    #检查yaml文件的语法是否正确\n\n# ansible-playbook a.yml --list-task       #检查tasks任务\n\n# ansible-playbook a.yml --list-hosts      #检查生效的主机\n\n# ansible-playbook a.yml --start-at-task='Copy Nginx.conf'     #指定从某个task开始运行\n")])])]),n("p",[s._v("示例")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim a.yml\n\n    hosts: 192.168.200.129                  //指定主机\n    remote_user: root                         //指定在被管理的主机上执行任务的用户\n    tasks:                                            //任务列表\n \t  name: disable selinux                //任务名关闭防火墙\n\t\tname: disable selinux     //调用command模块 执行关闭防火墙命令\n    name: start httpd                         //任务名 开启httpd\n    service: name=httpd state=started         //调用service模块 开启httpd 服务\n    ignore_errors:true                     //play中只要执行命令的返回值不为0，就会报错，tasks停止，\t\t ignore_errors: True #忽略错误，强制返回成功\n    \n    #ansible-playbook a.yml --syntax-check    #检查yaml文件的语法是否正确\n    #ansible-playbook a.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('条件测试：\n    when：\n        简单示例：\n\n        hosts: all\n        remote_user: root \n        vars:\n\n        username:user10\n        tasks:\n\n        name: create {{username }} user\n        user: name={{username}} \n         when: ansible_fqdn =="node2.magedu.com"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("迭代：重复同类task时使用\n调用：item\n定义循环列表：with_items\n              - apache\n              - php\n              - mysql-server\n注意：with_items中的列表值也可以是字典，但引用时要使用item.KEY\n      - {name: apache, conf: conffiles/httpd.conf}\n      - {name: php, conf: conffiles/php.ini}\n      - {name: mysql-server,conf: conffiles/my.cnf}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("tags:在playbook可以为某个或某些任务定义一个”标签“，在执行此playbook时，通过为ansible-playbook命令使用--tags选项能实现仅运行值得tasks而非所有的：")]),s._v(" "),n("p",[s._v("emplates文件必须存放于templates目录下，且命名为 .j2 结尾\nyaml/yml 文件需和templates目录平级，目录结构如下：\n./\n├── temnginx.yml\n└── templates\n└── nginx.conf.j2")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Templates示例\n    示例：利用templates 同步nginx配置文件\n    准备templates/nginx.conf.j2文件\n    vim temnginx.yml\n      - hosts: websrvs\n          remote_user: root\n      tasks:\n        - name: template config to remote hosts\n        template: src=nginx.conf.j2 dest=/etc/nginx/nginx.conf\n      ansible-playbook temnginx.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("roles：角色\n（1）目录名同角色名：\n（2）目录结构有固定格式：\nfiles:静态文件\ntemplates：jinjia2模板文件\ntasks：至少有main.yml文件，定义各tasks：\nhandlers:至少有一个main.yml文件，定义各handlers\nvars：至少有一个main.yml文件，定义变量\nmeta：定义依赖关系等信息\n（3）\nsite.yml中定义playbook。额外也可以有其它的yml文件；\n"),n("Valine")],1)])}),[],!1,null,null,null);a.default=t.exports}}]);