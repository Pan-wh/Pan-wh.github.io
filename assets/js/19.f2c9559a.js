(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{555:function(s,a,e){"use strict";e.r(a);var t=e(7),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"一、-虚拟机常用的镜像格式对比"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、-虚拟机常用的镜像格式对比"}},[s._v("#")]),s._v(" 一、 虚拟机常用的镜像格式对比")]),s._v(" "),e("p",[s._v("目前主要的虚拟机的格式：raw、cow、qcow、qcow2、vmdk")]),s._v(" "),e("h2",{attrs:{id:"_1、-raw格式镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、-raw格式镜像"}},[s._v("#")]),s._v(" 1、 raw格式镜像")]),s._v(" "),e("p",[s._v("老牌的镜像格式，用一个字来说就是裸，也就是赤裸裸，你随便dd一个file就模拟一个raw格式的镜像。由于裸地彻底，性能上来说还是不错的。centos6上的KVM和XEN默认就是这种格式。centos7上的KVM默认是qcow2格式。")]),s._v(" "),e("p",[s._v("裸的好处就是简单，支持转换其它格式的虚拟机镜像对裸露的来说很简单，空间使用来看，使用多少就是多少。")]),s._v(" "),e("p",[s._v("例如：qcow2转vmdk的方法就是：qcow2转raw，然后把raw转vmdk，当然也可以直接qcow2转vmdk。")]),s._v(" "),e("p",[s._v("缺点：不支持snapshot快照")]),s._v(" "),e("h2",{attrs:{id:"_2、-cow、qcow、qcow2格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、-cow、qcow、qcow2格式"}},[s._v("#")]),s._v(" 2、 cow、qcow、qcow2格式")]),s._v(" "),e("p",[s._v("（1）、 cow格式")]),s._v(" "),e("p",[s._v("还没有成熟，就被放弃。后来被qcow所取代。")]),s._v(" "),e("p",[s._v("（2）、 qcow格式")]),s._v(" "),e("p",[s._v("刚刚出现的时候就有比较好的特性，但性能和raw格式对比还是有很大的差距，目前已经被qcow2取代。")]),s._v(" "),e("p",[s._v("（3）、 qcow2格式")]),s._v(" "),e("p",[s._v("现在比较流行的一个虚拟化镜像格式，经过一代的优化，目前qcow2的性能上接近raw格式的性能。")]),s._v(" "),e("p",[s._v("qcow2格式支持snapshot快照，可以在镜像上做多个快照，具有一下优点：")]),s._v(" "),e("p",[s._v("更小的存储空间；支持创建img镜像；支持多个snapshot快照，对历史快照进行管理；")]),s._v(" "),e("p",[s._v("支持zlib的磁盘压缩；支持AES加密。")]),s._v(" "),e("h2",{attrs:{id:"_3、-vmdkgeshi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、-vmdkgeshi"}},[s._v("#")]),s._v(" 3、 vmdkgeshi")]),s._v(" "),e("p",[s._v("VMware 的格式，整体性能最好，因为原本 VMware 就是做虚拟化起家。从性能和功能上来说，vmdk应该算最出色的，由于 vmdk 结合了 VMware 的很多能力，目前来看，KVM 和 XEN 使用这种格式的情况不是太多。但就 VMware 的企业级虚拟化 Esxi 来看，它的稳定性和各方面的能力都很好。")]),s._v(" "),e("h1",{attrs:{id:"二、raw转qcow2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、raw转qcow2"}},[s._v("#")]),s._v(" 二、raw转qcow2")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1.虚拟机关机\nvirsh shutdown rke01\n\n2.转换磁盘文件格式\nqemu-img convert -f raw -O qcow2 /opt/kvm/images/rke01.img /opt/kvm/images/rke01.qcow2\n\n命令解释：\n-f 源格式 -O 转换目标格式 源文件镜像 目标文件镜像\nchown -R qemu:qemu /opt/kvm/images/rke01.qcow2\n\n3.修改配置文件的磁盘类型和磁盘路径\nvirsh edit rke01\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("4.虚拟机开机\nvirsh start rke01\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("Valine")],1)}),[],!1,null,null,null);a.default=r.exports}}]);